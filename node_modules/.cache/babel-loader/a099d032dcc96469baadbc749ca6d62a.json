{"remainingRequest":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/babel-loader/lib/index.js!/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/src/components/MessageManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/src/components/MessageManager.vue","mtime":1602353694719},{"path":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.match\";\nimport _defineProperty from \"/Users/huynhbinh/GHN/Internal-Tool/vue-quick-chat/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//import 'vue-material-design-icons/styles.css';\nimport { mapMutations } from \"vuex\";\nimport { DateTime } from \"luxon\";\nimport SendIcon from \"vue-material-design-icons/Send\";\nimport ImageIcon from \"vue-material-design-icons/Image\";\nexport default {\n  components: {\n    SendIcon: SendIcon,\n    ImageIcon: ImageIcon\n  },\n  props: {\n    colors: {\n      type: Object,\n      required: true\n    },\n    borderStyle: {\n      type: Object,\n      required: false,\n      default: function _default() {\n        return {\n          topLeft: \"10px\",\n          topRight: \"10px\",\n          bottomLeft: \"10px\",\n          bottomRight: \"10px\"\n        };\n      }\n    },\n    submitIconSize: {\n      type: Number,\n      required: false,\n      default: 24\n    },\n    submitImageIconSize: {\n      type: Number,\n      required: false,\n      default: 24\n    },\n    sendImages: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    acceptImageTypes: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      textInput: \"\"\n    };\n  },\n  computed: {\n    myself: function myself() {\n      return this.$store.state.myself;\n    },\n    placeholder: function placeholder() {\n      return this.$store.state.placeholder;\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapMutations([\"newMessage\"])), {}, {\n    sendMessage: function sendMessage(e) {\n      this.textInput = this.$refs.userInput.textContent;\n      this.$refs.userInput.textContent = \"\"; // match characters that are different of spaces, tabs, line breaks...\n\n      var matchNotEmpty = /[^\\s]+/i; // match characters that are between line spaces, tabs, line breaks...\n\n      var contentMatch = this.textInput.match(/^\\s*((.|\\n)+?)\\s*$/i);\n\n      if (this.textInput && matchNotEmpty.test(this.textInput) && contentMatch) {\n        var message = {\n          content: contentMatch[1],\n          // myself: true,\n          participantId: this.myself.id,\n          timestamp: DateTime.local(),\n          uploaded: false,\n          viewed: false,\n          type: \"text\"\n        };\n        this.$emit(\"onMessageSubmit\", message); //this.onMessageSubmit(message);\n\n        this.newMessage(message);\n      }\n    },\n    handleType: function handleType(e) {\n      this.$emit(\"onType\", e);\n    },\n    pickImage: function pickImage() {\n      this.$refs.inputImage.click();\n    },\n    handleImageChange: function () {\n      var _handleImageChange = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(e) {\n        var files, message;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                files = e.target.files;\n                message = {\n                  type: \"image\",\n                  preview: URL.createObjectURL(files[0]),\n                  src: \"\",\n                  content: \"image\",\n                  participantId: this.myself.id,\n                  timestamp: DateTime.local(),\n                  uploaded: false,\n                  viewed: false\n                };\n                this.$emit(\"onImageSelected\", {\n                  file: files[0],\n                  message: message\n                }); //this.onImageSelected(files, message)\n\n                this.newMessage(message);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleImageChange(_x) {\n        return _handleImageChange.apply(this, arguments);\n      }\n\n      return handleImageChange;\n    }()\n  })\n};",{"version":3,"sources":["MessageManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"container-message-manager\">\n        <div class=\"message-text-box\">\n            <div\n                ref=\"userInput\"\n                class=\"message-input\"\n                :placeholder=\"placeholder\"\n                tabIndex=\"0\"\n                contenteditable=\"true\"\n                @input=\"handleType\"\n                @keyup.enter.exact=\"sendMessage\"\n            ></div>\n        </div>\n        <div\n            class=\"container-send-message icon-send-message\"\n            @click.prevent=\"sendMessage\"\n        >\n            <SendIcon :size=\"submitIconSize\" :fill-color=\"colors.submitIcon\" />\n        </div>\n        <div\n            v-if=\"sendImages\"\n            class=\"container-send-message icon-send-message\"\n            @click=\"pickImage\"\n        >\n            <input\n                ref=\"inputImage\"\n                :accept=\"acceptImageTypes\"\n                type=\"file\"\n                style=\"display: none\"\n                @input=\"handleImageChange\"\n            />\n            <ImageIcon\n                :size=\"submitImageIconSize\"\n                :fill-color=\"colors.submitImageIcon\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\n//import 'vue-material-design-icons/styles.css';\nimport { mapMutations } from \"vuex\";\nimport { DateTime } from \"luxon\";\nimport SendIcon from \"vue-material-design-icons/Send\";\nimport ImageIcon from \"vue-material-design-icons/Image\";\nexport default {\n    components: {\n        SendIcon,\n        ImageIcon,\n    },\n    props: {\n        colors: {\n            type: Object,\n            required: true,\n        },\n        borderStyle: {\n            type: Object,\n            required: false,\n            default: () => {\n                return {\n                    topLeft: \"10px\",\n                    topRight: \"10px\",\n                    bottomLeft: \"10px\",\n                    bottomRight: \"10px\",\n                };\n            },\n        },\n        submitIconSize: {\n            type: Number,\n            required: false,\n            default: 24,\n        },\n        submitImageIconSize: {\n            type: Number,\n            required: false,\n            default: 24,\n        },\n        sendImages: {\n            type: Boolean,\n            required: false,\n            default: true,\n        },\n        acceptImageTypes: {\n            type: String,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            textInput: \"\",\n        };\n    },\n    computed: {\n        myself() {\n            return this.$store.state.myself;\n        },\n        placeholder() {\n            return this.$store.state.placeholder;\n        },\n    },\n    methods: {\n        ...mapMutations([\"newMessage\"]),\n        sendMessage(e) {\n            this.textInput = this.$refs.userInput.textContent;\n            this.$refs.userInput.textContent = \"\";\n            // match characters that are different of spaces, tabs, line breaks...\n            const matchNotEmpty = /[^\\s]+/i;\n            // match characters that are between line spaces, tabs, line breaks...\n            const contentMatch = this.textInput.match(/^\\s*((.|\\n)+?)\\s*$/i);\n            if (\n                this.textInput &&\n                matchNotEmpty.test(this.textInput) &&\n                contentMatch\n            ) {\n                let message = {\n                    content: contentMatch[1],\n                    // myself: true,\n                    participantId: this.myself.id,\n                    timestamp: DateTime.local(),\n                    uploaded: false,\n                    viewed: false,\n                    type: \"text\",\n                };\n                this.$emit(\"onMessageSubmit\", message);\n                //this.onMessageSubmit(message);\n                this.newMessage(message);\n            }\n        },\n        handleType: function (e) {\n            this.$emit(\"onType\", e);\n        },\n        pickImage: function () {\n            this.$refs.inputImage.click();\n        },\n        handleImageChange: async function (e) {\n            const files = e.target.files;\n            let message = {\n                type: \"image\",\n                preview: URL.createObjectURL(files[0]),\n                src: \"\",\n                content: \"image\",\n                participantId: this.myself.id,\n                timestamp: DateTime.local(),\n                uploaded: false,\n                viewed: false,\n            };\n            this.$emit(\"onImageSelected\", { file: files[0], message });\n            //this.onImageSelected(files, message)\n            this.newMessage(message);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n.quick-chat-container .container-message-manager {\n    height: 65px;\n    background: rgb(230, 222, 222);\n    display: flex;\n    align-items: center;\n    padding: 0 20px 0 20px;\n    -webkit-box-shadow: 0px -2px 40px 0px rgba(186, 186, 186, 0.67);\n    box-shadow: 0px -2px 40px 0px rgba(186, 186, 186, 0.67);\n\n    .message-text-box {\n        padding: 0 10px 0 10px;\n        flex: 1;\n        overflow: hidden;\n    }\n\n    .message-input {\n        width: 100%;\n        resize: none;\n        border: none;\n        outline: none;\n        box-sizing: border-box;\n        font-size: 15px;\n        font-weight: 400;\n        line-height: 1.33;\n        white-space: pre-wrap;\n        word-wrap: break-word;\n        color: #565867;\n        -webkit-font-smoothing: antialiased;\n        max-height: 40px;\n        bottom: 0;\n        overflow: scroll;\n        overflow-x: hidden;\n        overflow-y: auto;\n        text-align: left;\n        cursor: text;\n        display: inline-block;\n    }\n\n    .message-input:empty:before {\n        content: attr(placeholder);\n        display: block; /* For Firefox */\n        filter: contrast(15%);\n        outline: none;\n    }\n\n    .message-input:focus {\n        outline: none;\n    }\n\n    .container-send-message {\n        margin-left: 10px;\n    }\n\n    .container-send-message svg {\n        -webkit-box-sizing: content-box;\n        box-sizing: content-box;\n    }\n\n    .icon-send-message {\n        cursor: pointer;\n        opacity: 0.7;\n        transition: 0.3s;\n        border-radius: 11px;\n        padding: 8px;\n    }\n\n    .icon-send-message:hover {\n        opacity: 1;\n        background: #eee;\n    }\n}\n</style>\n"],"sourceRoot":"src/components"}]}